{"version":3,"sources":["file:///Users/mario/Desktop/BigBox/assets/scripts/ui/common/VTooltip.ts"],"names":["Component","instantiate","Label","Node","Tween","tween","UIOpacity","Vec3","_decorator","ccclass","property","VTooltip","type","tooltip","show","text","node","bgNode","textLabel","textLbl","enableMulti","getChildByName","getComponent","parent","active","string","stopAllByTarget","setPosition","opacity","moveDis","enableMoveAni","by","position","easing","start","delay","to","call","destroy","hide"],"mappings":"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","sourcesContent":["import { Component, instantiate, Label, Node, Tween, tween, UIOpacity, Vec3, _decorator } from \"cc\";\n\nconst { ccclass, property } = _decorator;\n\n@ccclass('VTooltip')\nexport default class VTooltip extends Component {\n\n    @property({ type: Node, tooltip: '背景节点' })\n    bgNode: Node = null;\n\n    @property({ type: Label, tooltip: '文本label' })\n    textLbl: Label = null;\n\n    @property({ tooltip: '是否展示多个提示文本' })\n    enableMulti: boolean = true;\n\n    @property({ tooltip: '是否展示提示文本移动动作' })\n    enableMoveAni: boolean = true;\n\n    show(text: string) {\n        if (typeof (text) === 'string' && text !== '') {\n            let node = this.bgNode;\n            let textLabel = this.textLbl;\n            if (this.enableMulti) {\n                node = instantiate(this.bgNode);\n                textLabel = node.getChildByName('label').getComponent(Label);\n                node.parent = this.node;\n                this.bgNode.active = false;\n            }\n            textLabel.string = text;\n            Tween.stopAllByTarget(node);\n            Tween.stopAllByTarget(node.getComponent(UIOpacity));\n            node.setPosition(0, 0);\n            node.getComponent(UIOpacity).opacity = 255;\n            node.active = true;\n            let moveDis = this.enableMoveAni ? 168 : 0;\n            tween(node)\n                .by(1.0, { position: new Vec3(0, moveDis, 0) }, { easing: 'sineOut' })\n                .start()\n            tween(node.getComponent(UIOpacity))\n                .delay(1.0)\n                .to(1.0, { opacity: 0 })\n                .call(() => {\n                    if (this.enableMulti) {\n                        node.destroy();\n                    } else {\n                        this.hide();\n                    }\n                })\n                .start()\n        }\n    }\n\n    hide() {\n        this.bgNode.active = false;\n        this.textLbl.string = '';\n    }\n}\n"]}